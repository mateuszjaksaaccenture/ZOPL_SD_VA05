var This={};sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/commons/DatePicker"],function(e,t,i,a,r){"use strict";return e.extend("sap.ui.zopl_sd_va05.controller.Panel",{inputId:"",table1:{},oODataJSONModel:{},filterIndex:null,sorter:[{name:"Maktx",order:0},{name:"Matnr",order:0},{name:"Werks",order:1}],aFilters:[],_oBundle:{},onLoad:function(){var e=window.getComputedStyle(document.getElementById("__xmlview1--shopId")).width;This.getView().byId("ordId").setProperty("width",e);This.getView().byId("materialId").setProperty("width",e);This.getView().byId("ordSerNum").setProperty("width",e)},floatComparator:function(e,t){if((e==null||e===undefined||e==="")&&(t==null||t===undefined||t==="")){return 0}if(e==null||e===undefined||e===""){return-1}if(t==null||t===undefined||t===""){return 1}if(parseFloat(e)<parseFloat(t)){return-1}if(parseFloat(e)===parseFloat(t)){return 0}if(parseFloat(e)>parseFloat(t)){return 1}},addColumnSorterAndFilter:function(e,t){var i=e.getParent();var a=new sap.ui.commons.Menu;a.addItem(new sap.ui.commons.MenuItem({text:"Sortowanie rosnąco",icon:"sap-icon://sort-ascending",select:function(){var a=new sap.ui.model.Sorter(e.getSortProperty(),false);a.fnCompare=t;i.getBinding("rows").sort(a);for(var r=0;r<i.getColumns().length;r++){i.getColumns()[r].setSorted(false)}e.setSorted(true);e.setSortOrder(sap.ui.table.SortOrder.Ascending)}}));a.addItem(new sap.ui.commons.MenuItem({text:"Sortowanie malejąco",icon:"sap-icon://sort-descending",select:function(a){var r=new sap.ui.model.Sorter(e.getSortProperty(),true);r.fnCompare=t;i.getBinding("rows").sort(r);for(var s=0;s<i.getColumns().length;s++){i.getColumns()[s].setSorted(false)}e.setSorted(true);e.setSortOrder(sap.ui.table.SortOrder.Descending)}}));a.addItem(new sap.ui.commons.MenuTextFieldItem({text:"Filtr",icon:"sap-icon://filter",select:function(e){var t=e.getParameters().item.getValue();var a=e.getSource().getParent().getParent().mProperties.sortProperty;var r=[];var s={};if(t.trim()!==""){s=new sap.ui.model.Filter(a,sap.ui.model.FilterOperator.EQ,parseFloat(t));e.getSource().getParent().getParent().setFiltered(true);r=[s]}else{e.getSource().getParent().getParent().setFiltered(false)}i.getBinding("rows").filter(r,sap.ui.model.FilterType.Application)}}));e.setMenu(a);return e},onInit:function(){var e=this.getView().getController();this._oBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle();this.table1=this.getView().byId("PozycjeLista");this.oODataJSONModel=new i;var t=this._oBundle.getText("PROCESSING");e._setInitialValues(e);this._oBusyDialog=new sap.m.BusyDialog({busyIndicatorDelay:3e3,text:t})},_setInitialValues:function(e){var t=e.formatDateToBackend(new Date).toISOString().substring(0,10);var i=e.formatDateToBackend(new Date);i.setDate(i.getDate()-7);this.aFilters.push(new sap.ui.model.Filter("OrdDate","BT",i,new Date));this.byId("dateFrom").setValue(i.toISOString().substring(0,10));this.byId("dateTo").setValue(t);this.byId("vbShowFilter").setVisible(false);this.byId("totalRows").setValue(0);this.byId("totalValue").setValue(0);this.byId("totalAmount").setValue(0)},onShowFilter:function(){this.byId("vbFilter").setVisible(true);this.byId("vbShowFilter").setVisible(false)},onOpenPositions:function(){var e=this.byId("SearchButton");e.setEnabled(false);var i=this._findFilterObject("MatNr"),a=this._findFilterObject("SalMan"),r=this._findFilterObject("Werks"),s=this._findFilterObject("OrdId"),o;if(!s){if(!r){o="Aby wyszukać dane podaj numer zlecenia albo podaj zakład"}}if(o){t.show(o);e.setEnabled(true)}else{var n=this;this.table1.getBinding("rows").filter(this.aFilters).attachDataReceived(function(){e.setEnabled(true);var i=n.table1.getBinding("rows").getContexts();n._setAmounts(n);if(i&&i.length>0){n.byId("vbFilter").setVisible(false);n.byId("vbShowFilter").setVisible(true)}else{t.show("Brak danych w systemie. Zmień kryteria wyszukiwania.")}n.table1.getColumns()[0].setProperty("width","111px")})}},_setAmounts:function(e){var t=e.table1.getBinding("rows").getContexts(),i,a,r=0,s=0,o=0,n=e.getView();if(t[0]){a=t[0].getPath();i=e.getView().getModel().getObject(a);r=i.RowSum.trim();s=i.GrossSum.trim();o=i.AmountSum.trim()}n.byId("totalRows").setValue(r);n.byId("totalValue").setValue(s);n.byId("totalAmount").setValue(o)},_findFilterObject:function(e){var t=this.aFilters.find(function(t){return t.sPath===e});return t},onExport:function(){this._oBusyDialog.open();var e=function(e){this._processDataAfterRead(e);this._oBusyDialog.close()}.bind(this),t=function(e){this._oBusyDialog.close()}.bind(this);this.getView().getModel().read("/OrderLineSet",{filters:this.aFilters,success:function(t){if(typeof e==="function"){e(t.results)}},error:function(i){if(typeof e==="function"){t(i)}}})},_processDataAfterRead:function(e){var t=[],i=this._oBundle;for(var a=0;a<e.length;a++){var r=this.filterIndex==null?e[a]:e[this.filterIndex[a]];t[a]=[r.OrdId,r.OrdPosNr,r.OrdNumber,r.PosType,r.MatName,r.MatNr,r.Werks,r.OrdType,this.toDateString(r.OrdDate),this._formatStatusText(r.OrdStatus),r.OrdAuthor,this.toDateString(r.DlvDate),this._formatStatusText(r.DlvStatus),r.DlvAuthor,this.toDateString(r.InvDate),this._formatStatusText(r.InvStatus),r.InvAuthor,Number.parseFloat(r.OrdTotalAmount),Number.parseFloat(r.OrdLineGross),r.Customer,this._getCustomerInfo(r),r.CustomerPersId,r.CustomerTaxNr,r.OrdSerNumList,r.OrdLock,r.InvNumber,r.DlvNumber,r.RcpNumber,r.OrdKorNum,r.BillAccount,r.LgOrt]}var s=new ExcelBuilder.Template.BasicReport;var o=s.stylesheet.createFormat({format:"$ #,##0.00;$ #,##0.00;-",font:{color:"FFE9F50A"}});var n=[{id:"OrdId",name:"Nr Zlecenia",type:"string",width:12},{id:"OrdPosNr",name:"Nr Pozycji",type:"string",width:8},{id:"OrdNumber",name:"Nr Zamówienia",type:"string",width:30},{id:"PosType",name:"B. Sprzedaży",type:"string",width:8},{id:"MatName",name:"Nazwa Materiału",type:"string",width:40},{id:"MatNr",name:"Nr Materiału",type:"string",width:20},{id:"Werks",name:"Zakład",type:"string",width:6},{id:"OrdType",name:"Rodz. Zlec.",type:"string",width:6},{id:"OrdDate",name:"Data Zlec.",type:"string",width:11},{id:"OrdStatus",name:"St. Zlec.",type:"string",width:6},{id:"OrdAuthor",name:"Autor Zlec.",type:"string",width:12},{id:"DlvDate",name:"Data Dost.",type:"string",width:11},{id:"DlvStatus",name:"St. Dost.",type:"string",width:6},{id:"DlvAuthor",name:"Autor Dost.",type:"string",width:12},{id:"InvDate",name:"Data Fakt.",type:"string",width:11},{id:"InvStatus",name:"St. Fakt.",type:"string",width:5},{id:"InvAuthor",name:"Autor Fakt.",type:"string",width:11},{id:"OrdTotalAmount",name:"Ilość",type:"number",width:11},{id:"OrdLineGross",name:"Brutto",type:"number",width:10},{id:"Customer",name:"Klient",type:"string",width:11},{id:"CustomerInfo",name:"Dane klienta",type:"string",width:11},{id:"Pesel",name:"PESEL",type:"string",width:11},{id:"Nip",name:"NIP",type:"string",width:11},{id:"OrdSerNumList",name:"Nr-y Ser.",type:"string",width:18},{id:"OrdLock",name:"Blok.",type:"string",width:5},{id:"InvNumber",name:"Nr Fakt.",type:"string",width:11},{id:"DlvNumber",name:"Nr Dost.",type:"string",width:11},{id:"RcpNumber",name:"Nr Parag.",type:"string",width:11},{id:"OrdKorNum",name:"Nr Zlec. Kor.",type:"string",width:11},{id:"BillAccount",name:"Nr Konta",type:"string",width:11},{id:"LgOrt",name:"Skład",type:"string",width:6}];var d=[[{value:"Nr Zlecenia",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nr Pozycji",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nr Zamówienia",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"B. Sprzedaży",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nazwa Materiału",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nr Materiału",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Zakład",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Rodz. Zlec.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Data Zlec.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"St. Zlec.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Autor Zlec.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Data Dost.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"St. Dost.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Autor Dost.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Data Fakt.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"St. Fakt.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Autor Fakt.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Ilość",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Brutto",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Klient",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Dane klienta",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Pesel",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"NIP",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nr-y Ser.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Blok.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nr Fakt.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nr Dost.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nr Parag.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nr Zlec. Kor.",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Nr Konta",metadata:{style:s.predefinedFormatters.header.id,type:"string"}},{value:"Skład",metadata:{style:s.predefinedFormatters.header.id,type:"string"}}]].concat(t);s.setHeader([{bold:true,text:"Raport Zleceń"},"",""]);s.setData(d);s.setColumns(n);var l=s.getWorksheet();var u=new ExcelBuilder.SheetView;l.sheetView=u;ExcelBuilder.Builder.createFile(s.prepare(),{type:"uint8array"}).then(function(e){var t=(new Date).toISOString().substr(0,19).replace(/-/g,"").replace(/:/g,"");var i="POS_Orders_"+t+".xlsx";var a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});saveAs(a,i)}).catch(function(e){console.error(e)})},_getCustomerInfo:function(e){var t=this.formatCustomer(e.CustomerName1,e.CustomerName2,e.CustomerPostCode,e.CustomerCity1,e.CustomerStreet);return t},_setDataToExport:function(){var e=this.table1.getBinding("rows").getContexts(),t=[];for(var i=0;i<e.length;i++){t.push(this.getView().getModel().getObject(e[i].getPath()))}return t},toDateString:function(e){try{return e.toISOString().substr(0,10)}catch(e){return" "}},onOpenGrupyMatDialog:function(){var e=this.getOwnerComponent().getModel("MMmodel");this.inputId="groupId";var t=new sap.ui.model.odata.ODataModel(e.sServiceUrl,true);var a=new i;t.read("/MaterialGroupSet",null,null,true,function(e){e.results.sort(function(e,t){return e.Matkl.localeCompare(t.Matkl)});a.setData(e)});this.oDialog=this.getView().byId("GrupyMatDialog");if(!this.oDialog){this.oDialog=sap.ui.xmlfragment("sap.ui.zopl_sd_va05.view.DialogGrupyMat",this);this.getView().addDependent(this.oDialog)}this.getView().setModel(a);this.oDialog.open()},onOpenOrdTypeDialog:function(e){this.inputId="ordType";if(!this._oOrderTypeDialog){this._oOrderTypeDialog=sap.ui.xmlfragment(this.getView().getId(),"sap.ui.zopl_sd_va05.view.fragment.OrdTypeDialog",this);this.getView().addDependent(this._oOrderTypeDialog)}this._oOrderTypeDialog.open()},onOpenSalManDialog:function(e){this.inputId="salMan";if(!this._oSalManDialog){this._oSalManDialog=sap.ui.xmlfragment(this.getView().getId(),"sap.ui.zopl_sd_va05.view.fragment.SalManDialog",this);this.getView().addDependent(this._oSalManDialog)}this._oSalManDialog.open()},onOpenPosTypeDialog:function(e){this.inputId="posType";if(!this._oPostTypeDialog){this._oPostTypeDialog=sap.ui.xmlfragment(this.getView().getId(),"sap.ui.zopl_sd_va05.view.fragment.PosTypeDialog",this);this.getView().addDependent(this._oPostTypeDialog)}this._oPostTypeDialog.open()},onOpenStatusDialog:function(e){this.inputId=e.getSource().data("mydata");if(!this._oStatusDialog){this._oStatusDialog=sap.ui.xmlfragment(this.getView().getId(),"sap.ui.zopl_sd_va05.view.fragment.StatusDialog",this);this.getView().addDependent(this._oStatusDialog)}this._oStatusDialog.open()},onMaterialDialogOpen:function(e){var i=this.byId("shopId").getValue();this.inputId="materialId";var a=i?undefined:this.getOwnerComponent().getModel("i18n").getResourceBundle().getText("NO_PLANT_SELECTED");if(a){t.show(a);return}if(!this._oMatDialog){this._oMatDialog=sap.ui.xmlfragment(this.getView().getId(),"sap.ui.zopl_sd_va05.view.fragment.MaterialDialog",this);this.getView().addDependent(this._oMatDialog);this._oMatDialog._oDialog.attachEventOnce("afterOpen",function(e){var t=e.getSource().getContent();for(var i=0;i<t.length;i++){if(t[i].getMetadata().getElementName()==="sap.m.List"){var a=[],r=new sap.ui.xmlfragment("sap.ui.zopl_sd_va05.view.fragment.MatItemTemplate",this);a.push(new sap.ui.model.Filter("ShopId",sap.ui.model.FilterOperator.EQ,this.byId("shopId").getValue()));t[i].bindItems({path:"/Materials",filters:a,template:r})}}}.bind(this))}this._oMatDialog.open()},onOpenWerksDialog:function(e){this.inputId="shopId";if(!this._oWerksDialog){this._oWerksDialog=sap.ui.xmlfragment(this.getView().getId(),"sap.ui.zopl_sd_va05.view.fragment.ShopDialog",this);this.getView().addDependent(this._oWerksDialog)}this._oWerksDialog.open()},onFilterMaterials:function(e){var t=e.getParameter("value"),i=this.byId("shopId").getValue(),s=[];s.push(new a("SearchValue",r.Contains,t));s.push(new a("ShopId",r.EQ,i));e.getSource().getBinding("items").filter(s)},onFilterMiasta:function(e){var t=e.getParameter("value");var i=new a({filters:[new a("Ort01",r.Contains,t)],and:false});e.getSource().getBinding("items").filter(i)},onFilterWerks:function(e){var t=e.getParameter("value");var i=[new a("SearchWerks","EQ",t)];e.getSource().getBinding("items").filter(i)},onFilterSalMan:function(e){var t=e.getParameter("value");var i=[new a("SalManName","EQ",t)];e.getSource().getBinding("items").filter(i)},onFilterGrupyMat:function(e){var t=e.getParameter("value");var i=new a({filters:[new a("Matkl",r.Contains,t),new a("Wgbez",r.Contains,t),new a("Wgbez60",r.Contains,t)],and:false});e.getSource().getBinding("items").filter(i)},onFilterOrdType:function(e){var t=e.getParameter("value");var i=[new a("Bezei","EQ",t)];e.getSource().getBinding("items").filter(i)},onFilterPosType:function(e){var t=e.getParameter("value");var i=[new a("bezei","EQ",t)];e.getSource().getBinding("items").filter(i)},onFilterStatus:function(e){var t=e.getParameter("value");var i=[new a("StatusName","EQ",t)];e.getSource().getBinding("items").filter(i)},onShowSerial:function(e){var t=e.getSource().data("ordId");var a=e.getSource().data("ordPosNr");var r=this.getOwnerComponent().getModel("MMmodel");var s=new sap.ui.model.odata.ODataModel(r.sServiceUrl,true);var o=new i;var n=[];n.push(new sap.ui.model.Filter("OrdId",sap.ui.model.FilterOperator.EQ,t));n.push(new sap.ui.model.Filter("OrdPosNr",sap.ui.model.FilterOperator.EQ,a));s.read("/SerialNumberSet",{filters:n,success:function(e){o.setData(e)}});this.oDialog=this.getView().byId("SerialDialog");if(!this.oDialog){this.oDialog=sap.ui.xmlfragment("sap.ui.zopl_sd_va05.view.DialogSerial",this);this.getView().addDependent(this.oDialog)}this.getView().setModel(o);this.oDialog.open()},_handleValueHelpClose:function(e){var t=e.getParameters("selectedItems").selectedItems,i,a,r="";a=this._getNameById(this.inputId);this.removeSpecificFilter(a);if(this.inputId==="ordStatus"||this.inputId==="dlvStatus"||this.inputId==="invStatus"||this.inputId==="ordType"){if(t[0].getTitle()==="Otwarte"){this.aFilters.push(new sap.ui.model.Filter(a,"NE","C"))}else if(t[0].getTitle()==="Zakończona"){this.aFilters.push(new sap.ui.model.Filter(a,"EQ","C"))}else if(t[0].getTitle()==="Sprzedażowe"){this.aFilters.push(new sap.ui.model.Filter(a,"EQ","ZOR"))}else if(t[0].getTitle()==="Zwrotne"){this.aFilters.push(new sap.ui.model.Filter(a,"NE","ZOR"))}if(r!==""){r=r+";"+t[0].getTitle()}else{r=t[0].getTitle()}}else if(t&&this.inputId!=="materialId"){for(var s=0;s<t.length;s++){i=t[s];this.aFilters.push(new sap.ui.model.Filter(a,"EQ",t[s].getTitle()));if(r!==""){r=r+";"+t[s].getTitle()}else{r=t[s].getTitle()}}}else if(this.inputId==="materialId"){var o=e.getSource()._list.getSelectedContextPaths(),n,d;for(var l=0;l<o.length;l++){n=o[l].split("'");d=n[1];this.aFilters.push(new sap.ui.model.Filter(a,"EQ",d));if(r!==""){r=r+";"+d}else{r=d}}}var u=this.getView().byId(this.inputId);u.setValue(r)},_getNameById:function(e){var t;switch(e){case"ordType":t="OrdType";break;case"shopId":t="Werks";break;case"salMan":t="SalMan";break;case"ordStatus":t="OrdStatus";break;case"dlvStatus":t="DlvStatus";break;case"invStatus":t="InvStatus";break;case"posType":t="PosType";break;case"ordSerNum":t="OrdSerNum";break;case"ordId":t="OrdId";break;case"materialId":t="MatNr";break}return t},handleChange:function(e){var i=e.oSource;var a=e.getParameter("valid");var r=this.byId("dateFrom").getProperty("dateValue"),s=this.byId("dateTo").getProperty("dateValue");if(a){i.setValueState(sap.ui.core.ValueState.None);r=this.formatDateToBackend(r);s=this.formatDateToBackend(s);this.removeSpecificFilter("OrdDate");this.aFilters.push(new sap.ui.model.Filter("OrdDate","BT",r,s))}else{i.setValueState(sap.ui.core.ValueState.Error);t.show("Nieprawidłowy format daty.")}},onResetValue:function(e){var t=e.getSource().data("mydata"),i=this._getNameById(t);if(t==="shopId"){this.byId("shopId").setEnabled(true);if(this._oWerksDialog){this._oWerksDialog._list.removeSelections();this._oWerksDialog._oList._aSelectedPaths=[];this._oWerksDialog.getBinding("items").filter([])}}else if(t==="dateFrom"||t==="dateTo"){var a=(new Date).toISOString().substring(0,10);this.byId(t).setValue(a)}else if(t==="salMan"){if(this._oSalManDialog){this._oSalManDialog._list.removeSelections();this._oSalManDialog._oList._aSelectedPaths=[];this._oSalManDialog.getBinding("items").filter([])}this.byId(t).setValue("")}else if(t==="posType"){if(this._oPostTypeDialog){this._oPostTypeDialog._list.removeSelections();this._oPostTypeDialog._oList._aSelectedPaths=[];this._oPostTypeDialog.getBinding("items").filter([])}this.byId(t).setValue("")}if(t!=="dateFrom"&&t!=="dateTo"){this.byId(t).setValue("")}this.removeSpecificFilter(i)},onChangeValue:function(e){var t=e.getSource().getId(),i,a=e.getSource().getValue();if(t.includes("materialId")){i="MatNr"}else if(t.includes("ordId")){i="OrdId"}else if(t.includes("ordSerNum")){i="OrdSerNum"}this.removeSpecificFilter(i);if(a&&a!==""){this.aFilters.push(new sap.ui.model.Filter(i,"EQ",a))}},onCheckBoxSelect:function(e){var t=e.getSource().getId(),i,a=e.getSource().getSelected();if(t.includes("ordOwn")){i="OrdOwn"}else if(t.includes("incomplete")){i="Incomplete"}this.removeSpecificFilter(i);if(a){this.aFilters.push(new sap.ui.model.Filter(i,"EQ",a))}},formatCustomer:function(e,t,i,a,r){var s="";if(!e&&!t){s="brak nazwy"}else if(e&&t){s=e+" "+t}else if(e||t){s=e+t}if(!i&&!a&&!r){s=s+"\nbrak adresu"}else if(i&&a&&r){s=s+" \n"+r+",\n"+i+" "+a}else{if(!r&&!a){s=s+" \n"+i}else if(!a&&!i){s=s+" \n"+r}else if(!r&&!i){s=s+" \n"+a}else if(!a){s=s+" \n"+r+",\n"+i}else if(!r){s=s+" \n"+i+" "+a}else if(!i){s=s+" \n"+r+",\n"+a}}return s},openSNDialog:function(e){var t=[],i=this.getView().getModel(),a=e.getSource(),r=a.getBindingContext().getPath(),s=i.getObject(r),o=s.OrdId,n=s.OrdPosNr;t.push(new sap.ui.model.Filter("OrdId","EQ",o));t.push(new sap.ui.model.Filter("OrdPosNr","EQ",n));i.read("/SerialNumberSet",{filters:t,success:function(e){this.getView().getModel("SN").setData({SN:e.results,OrdId:o,OrdPosNr:n});if(!this._oSNDialog){this._oSNDialog=sap.ui.xmlfragment(this.getView().getId(),"sap.ui.zopl_sd_va05.view.fragment.SNDialog",this);this.getView().addDependent(this._oSNDialog)}this._oSNDialog.open()}.bind(this),error:function(e){}.bind(this)})},onCloseDialogSN:function(){this._oSNDialog.close()},openCorrNoDialog:function(e){var t=[],i=this.getView().getModel(),a=e.getSource(),r=a.getBindingContext().getPath(),s=i.getObject(r),o=s.OrdId,n=s.OrdPosNr;t.push(new sap.ui.model.Filter("OrdId","EQ",o));t.push(new sap.ui.model.Filter("OrdPosNr","EQ",n));i.read("/OrderCorrectionSet",{filters:t,success:function(e){this.getView().getModel("CorrNo").setData({CorrNo:e.results,OrdId:parseInt(o,10).toString(),OrdPosNr:n});if(!this._oCorrNoDialog){this._oCorrNoDialog=sap.ui.xmlfragment(this.getView().getId(),"sap.ui.zopl_sd_va05.view.fragment.CorrNoDialog",this);this.getView().addDependent(this._oCorrNoDialog)}this._oCorrNoDialog.open()}.bind(this),error:function(e){}.bind(this)})},onCloseDialogCorrNo:function(){this._oCorrNoDialog.close()},formatDateToBackend:function(e){var t,i;if(e){i=e.getTimezoneOffset()*60*1e3;t=new Date(e.getTime()-i);var a={vJSDate:Date,bUTC:false},r={nullable:true},s=new sap.ui.model.odata.type.Date(a,r);return s.formatValue(t,"any")}},removeSpecificFilter:function(e){this.aFilters=this.aFilters.filter(function(t){return t.sPath!==e})},_formatStatusText:function(e){if(!e){return""}else{var t=e==="C"?"FINISHED_A":"OPEN_A";return this._oBundle.getText(t)}}})});
//# sourceMappingURL=Panel.controller.js.map